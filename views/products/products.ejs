<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <%- include('../templates/cssbasic') %>
    <link rel='stylesheet' href='/stylesheets/products.css' />
    <link rel='stylesheet' href='/stylesheets/acordeon.css' />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
  </head>
  <body>
  <!-- HEADER -->
  <%- include('../templates/header_full') %>
    <!-- BODY -->
      <div class="body_container">
        <div class="h_filter_diagram">
          <div class="h_filter_left">
            <a href="#">Atras</a>
          </div>
          <div class="h_filter_right">
            <div class="h_filter_pos">
              <a href="/">Inicio</a>
              <p>/</p>
              <a href="#">Los m√°s vendidos</a>
            </div>
            <div class="h_filter_article">
              <p><%= products.length %> Articulos</p>
            </div>
          </div>
        </div>
        <div class="products_container">
          <div class="filter">
            <div class="filter_head">
                <h3>Filtros</h3>
                <a href="">aplicar filtros</a>
            </div>
            <div class="filter_bot">
              <ul id="accordion" class="accordion">
                <li>
                  <div class="link">CATEGORIA<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                    <li><a href="#">Photoshop</a></li>
                    <li><a href="#">HTML</a></li>
                    <li><a href="#">CSS</a></li>
                    <li><a href="#">Maquetacion web</a></li>
                  </ul>
                </li>
                <li>
                  <div class="link">PRECIO<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                    <li><a href="#">Javascript</a></li>
                    <li><a href="#">jQuery</a></li>
                    <li><a href="#">Frameworks javascript</a></li>
                  </ul>
                </li>
                <li>
                  <div class="link">COLOR<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                    <li><a href="#">Tablets</a></li>
                    <li><a href="#">Dispositivos mobiles</a></li>
                    <li><a href="#">Medios de escritorio</a></li>
                    <li><a href="#">Otros dispositivos</a></li>
                  </ul>
                </li>
                <li><div class="link">MARCA<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                    <li><a href="#">Google</a></li>
                    <li><a href="#">Bing</a></li>
                    <li><a href="#">Yahoo</a></li>
                    <li><a href="#">Otros buscadores</a></li>
                  </ul>
                </li>
                <li><div class="link">TALLE<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                    <li><a href="#">Google</a></li>
                    <li><a href="#">Bing</a></li>
                    <li><a href="#">Yahoo</a></li>
                    <li><a href="#">Otros buscadores</a></li>
                  </ul>
                </li>
                <li><div class="link">DEPORTE<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                    <li><a href="#">Google</a></li>
                    <li><a href="#">Bing</a></li>
                    <li><a href="#">Yahoo</a></li>
                    <li><a href="#">Otros buscadores</a></li>
                  </ul>
                </li>
                <li><div class="link">RANKING<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                    <li><a href="#">Google</a></li>
                    <li><a href="#">Bing</a></li>
                    <li><a href="#">Yahoo</a></li>
                    <li><a href="#">Otros buscadores</a></li>
                  </ul>
                </li>
                <li><div class="link">PRODUCTO<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                    <li><a href="#">Google</a></li>
                    <li><a href="#">Bing</a></li>
                    <li><a href="#">Yahoo</a></li>
                    <li><a href="#">Otros buscadores</a></li>
                  </ul>
                </li>
                <li><div class="link">SALE<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                    <li><a href="#">Google</a></li>
                    <li><a href="#">Bing</a></li>
                    <li><a href="#">Yahoo</a></li>
                    <li><a href="#">Otros buscadores</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
          <div class="products">
            <!-- <!-- Producto -->
            <% for( let i = 0; i < products.length; i++ ) { %>
              <article class="product">
                <i class="far fa-heart" style="display: none;"></i>
                <div class="product_inside">
                  <div class="product_image_conteiner">
                      <img src="/images/products/<%= products[i].imglink%>" alt="">
                  </div>
                  <div class="product_text">
                    <p class="product_name"><%= products[i].name %></p>
                    <p class="product_price">$<%= products[i].price %></p>
                    <a href="/products/<%= products[i].id %>" class="addbasket">COMPRAR</a>
                  </div>  
                </div>
              </article>
          <% } %>
          </div>
        </div>
      </div>
  <!-- FOOTER -->
  <%- include('../templates/footer') %>
  </body>
  <script>
    $(function() {
    var Accordion = function(el, multiple) {
      this.el = el || {};
      this.multiple = multiple || false;
  
      // Variables privadas
      var links = this.el.find('.link');
      // Evento
      links.on('click', {el: this.el, multiple: this.multiple}, this.dropdown)
    }
  
    Accordion.prototype.dropdown = function(e) {
      var $el = e.data.el;
        $this = $(this),
        $next = $this.next();
  
      $next.slideToggle();
      $this.parent().toggleClass('open');
  
      if (!e.data.multiple) {
        $el.find('.submenu').not($next).slideUp().parent().removeClass('open');
      };
    }	
  
    var accordion = new Accordion($('#accordion'), false);
  });
  </script>
</html>
